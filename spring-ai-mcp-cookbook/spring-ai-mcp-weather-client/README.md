

# Spring AI MCP 天气查询客户端

本地采用stdio调用spring-ai-mcp-weather-server；启动运行控制台输出如下：

```bash
"D:\Program Files\jdk-17.0.12\bin\java.exe" -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:57459,suspend=y,server=n -agentpath:C:\Users\Administrator\AppData\Local\Temp\idea_libasyncProfiler_dll_temp_folder5\libasyncProfiler.dll=version,jfr,event=wall,interval=10ms,cstack=no,file=C:\Users\Administrator\IdeaSnapshots\Application__3__2025_06_15_193810.jfr,dbghelppath=C:\Users\Administrator\AppData\Local\Temp\idea_dbghelp_dll_temp_folder1\dbghelp.dll,log=C:\Users\Administrator\AppData\Local\Temp\Application__3__2025_06_15_193810.jfr.log.txt,logLevel=DEBUG -XX:TieredStopAtLevel=1 -Dspring.output.ansi.enabled=always -Dcom.sun.management.jmxremote -Dspring.jmx.enabled=true -Dspring.liveBeansView.mbeanDomain -Dspring.application.admin.enabled=true "-Dmanagement.endpoints.jmx.exposure.include=*" -javaagent:C:\Users\Administrator\AppData\Local\JetBrains\IntelliJIdea2024.3\captureAgent\debugger-agent.jar -Dkotlinx.coroutines.debug.enable.creation.stack.trace=false -Ddebugger.agent.enable.coroutines=true -Dkotlinx.coroutines.debug.enable.flows.stack.trace=true -Dkotlinx.coroutines.debug.enable.mutable.state.flows.stack.trace=true -Dfile.encoding=UTF-8 -classpath "D:\github\spring-ai-cookbook\spring-ai-mcp-cookbook\spring-ai-mcp-weather-client\target\classes;D:\maven-repository\org\springframework\ai\spring-ai-starter-model-openai\1.0.0\spring-ai-starter-model-openai-1.0.0.jar;D:\maven-repository\org\springframework\boot\spring-boot-starter\3.3.5\spring-boot-starter-3.3.5.jar;D:\maven-repository\org\springframework\boot\spring-boot\3.3.5\spring-boot-3.3.5.jar;D:\maven-repository\org\springframework\boot\spring-boot-autoconfigure\3.3.5\spring-boot-autoconfigure-3.3.5.jar;D:\maven-repository\org\springframework\boot\spring-boot-starter-logging\3.3.5\spring-boot-starter-logging-3.3.5.jar;D:\maven-repository\ch\qos\logback\logback-classic\1.5.11\logback-classic-1.5.11.jar;D:\maven-repository\ch\qos\logback\logback-core\1.5.11\logback-core-1.5.11.jar;D:\maven-repository\org\apache\logging\log4j\log4j-to-slf4j\2.23.1\log4j-to-slf4j-2.23.1.jar;D:\maven-repository\org\apache\logging\log4j\log4j-api\2.23.1\log4j-api-2.23.1.jar;D:\maven-repository\org\slf4j\jul-to-slf4j\2.0.16\jul-to-slf4j-2.0.16.jar;D:\maven-repository\jakarta\annotation\jakarta.annotation-api\2.1.1\jakarta.annotation-api-2.1.1.jar;D:\maven-repository\org\yaml\snakeyaml\2.2\snakeyaml-2.2.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-model-openai\1.0.0\spring-ai-autoconfigure-model-openai-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-model-tool\1.0.0\spring-ai-autoconfigure-model-tool-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-retry\1.0.0\spring-ai-autoconfigure-retry-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-model-chat-observation\1.0.0\spring-ai-autoconfigure-model-chat-observation-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-model-embedding-observation\1.0.0\spring-ai-autoconfigure-model-embedding-observation-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-model-image-observation\1.0.0\spring-ai-autoconfigure-model-image-observation-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-openai\1.0.0\spring-ai-openai-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-model\1.0.0\spring-ai-model-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-commons\1.0.0\spring-ai-commons-1.0.0.jar;D:\maven-repository\io\micrometer\micrometer-core\1.13.6\micrometer-core-1.13.6.jar;D:\maven-repository\org\hdrhistogram\HdrHistogram\2.2.2\HdrHistogram-2.2.2.jar;D:\maven-repository\org\latencyutils\LatencyUtils\2.0.3\LatencyUtils-2.0.3.jar;D:\maven-repository\io\micrometer\context-propagation\1.1.2\context-propagation-1.1.2.jar;D:\maven-repository\org\springframework\ai\spring-ai-template-st\1.0.0\spring-ai-template-st-1.0.0.jar;D:\maven-repository\org\antlr\ST4\4.3.4\ST4-4.3.4.jar;D:\maven-repository\org\antlr\antlr-runtime\3.5.3\antlr-runtime-3.5.3.jar;D:\maven-repository\org\springframework\spring-messaging\6.1.14\spring-messaging-6.1.14.jar;D:\maven-repository\io\projectreactor\reactor-core\3.6.11\reactor-core-3.6.11.jar;D:\maven-repository\org\reactivestreams\reactive-streams\1.0.4\reactive-streams-1.0.4.jar;D:\maven-repository\org\antlr\antlr4-runtime\4.13.1\antlr4-runtime-4.13.1.jar;D:\maven-repository\com\github\victools\jsonschema-module-swagger-2\4.37.0\jsonschema-module-swagger-2-4.37.0.jar;D:\maven-repository\io\swagger\core\v3\swagger-annotations\2.2.25\swagger-annotations-2.2.25.jar;D:\maven-repository\org\springframework\ai\spring-ai-retry\1.0.0\spring-ai-retry-1.0.0.jar;D:\maven-repository\org\springframework\retry\spring-retry\2.0.10\spring-retry-2.0.10.jar;D:\maven-repository\org\springframework\spring-webflux\6.1.14\spring-webflux-6.1.14.jar;D:\maven-repository\com\github\victools\jsonschema-generator\4.37.0\jsonschema-generator-4.37.0.jar;D:\maven-repository\com\fasterxml\classmate\1.7.0\classmate-1.7.0.jar;D:\maven-repository\com\fasterxml\jackson\core\jackson-core\2.17.2\jackson-core-2.17.2.jar;D:\maven-repository\com\github\victools\jsonschema-module-jackson\4.37.0\jsonschema-module-jackson-4.37.0.jar;D:\maven-repository\org\springframework\spring-context-support\6.1.14\spring-context-support-6.1.14.jar;D:\maven-repository\org\slf4j\slf4j-api\2.0.16\slf4j-api-2.0.16.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-model-chat-client\1.0.0\spring-ai-autoconfigure-model-chat-client-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-client-chat\1.0.0\spring-ai-client-chat-1.0.0.jar;D:\maven-repository\com\fasterxml\jackson\module\jackson-module-jsonSchema\2.17.2\jackson-module-jsonSchema-2.17.2.jar;D:\maven-repository\javax\validation\validation-api\1.1.0.Final\validation-api-1.1.0.Final.jar;D:\maven-repository\com\knuddels\jtokkit\1.1.0\jtokkit-1.1.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-model-chat-memory\1.0.0\spring-ai-autoconfigure-model-chat-memory-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-starter-mcp-client\1.0.0\spring-ai-starter-mcp-client-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-autoconfigure-mcp-client\1.0.0\spring-ai-autoconfigure-mcp-client-1.0.0.jar;D:\maven-repository\org\springframework\ai\spring-ai-mcp\1.0.0\spring-ai-mcp-1.0.0.jar;D:\maven-repository\io\modelcontextprotocol\sdk\mcp\0.10.0\mcp-0.10.0.jar;D:\maven-repository\org\springframework\boot\spring-boot-starter-web\3.3.5\spring-boot-starter-web-3.3.5.jar;D:\maven-repository\org\springframework\boot\spring-boot-starter-json\3.3.5\spring-boot-starter-json-3.3.5.jar;D:\maven-repository\com\fasterxml\jackson\core\jackson-databind\2.17.2\jackson-databind-2.17.2.jar;D:\maven-repository\com\fasterxml\jackson\core\jackson-annotations\2.17.2\jackson-annotations-2.17.2.jar;D:\maven-repository\com\fasterxml\jackson\datatype\jackson-datatype-jdk8\2.17.2\jackson-datatype-jdk8-2.17.2.jar;D:\maven-repository\com\fasterxml\jackson\datatype\jackson-datatype-jsr310\2.17.2\jackson-datatype-jsr310-2.17.2.jar;D:\maven-repository\com\fasterxml\jackson\module\jackson-module-parameter-names\2.17.2\jackson-module-parameter-names-2.17.2.jar;D:\maven-repository\org\springframework\boot\spring-boot-starter-tomcat\3.3.5\spring-boot-starter-tomcat-3.3.5.jar;D:\maven-repository\org\apache\tomcat\embed\tomcat-embed-core\10.1.31\tomcat-embed-core-10.1.31.jar;D:\maven-repository\org\apache\tomcat\embed\tomcat-embed-el\10.1.31\tomcat-embed-el-10.1.31.jar;D:\maven-repository\org\apache\tomcat\embed\tomcat-embed-websocket\10.1.31\tomcat-embed-websocket-10.1.31.jar;D:\maven-repository\org\springframework\spring-web\6.1.14\spring-web-6.1.14.jar;D:\maven-repository\org\springframework\spring-beans\6.1.14\spring-beans-6.1.14.jar;D:\maven-repository\io\micrometer\micrometer-observation\1.13.6\micrometer-observation-1.13.6.jar;D:\maven-repository\io\micrometer\micrometer-commons\1.13.6\micrometer-commons-1.13.6.jar;D:\maven-repository\org\springframework\spring-webmvc\6.1.14\spring-webmvc-6.1.14.jar;D:\maven-repository\org\springframework\spring-aop\6.1.14\spring-aop-6.1.14.jar;D:\maven-repository\org\springframework\spring-context\6.1.14\spring-context-6.1.14.jar;D:\maven-repository\org\springframework\spring-expression\6.1.14\spring-expression-6.1.14.jar;D:\maven-repository\org\springframework\spring-core\6.1.14\spring-core-6.1.14.jar;D:\maven-repository\org\springframework\spring-jcl\6.1.14\spring-jcl-6.1.14.jar;D:\Program Files\JetBrains\IntelliJ IDEA 2024.3.5\lib\idea_rt.jar" spring.ai.mcp.weather.client.Application
Connected to the target VM, address: '127.0.0.1:57459', transport: 'socket'

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.3.5)

2025-06-15T19:38:12.184+08:00  INFO 20176 --- [mcp] [           main] s.ai.mcp.weather.client.Application      : Starting Application using Java 17.0.12 with PID 20176 (D:\github\spring-ai-cookbook\spring-ai-mcp-cookbook\spring-ai-mcp-weather-client\target\classes started by Administrator in D:\github\spring-ai-cookbook)
2025-06-15T19:38:12.190+08:00  INFO 20176 --- [mcp] [           main] s.ai.mcp.weather.client.Application      : No active profile set, falling back to 1 default profile: "default"
2025-06-15T19:38:16.319+08:00  INFO 20176 --- [mcp] [           main] s.ai.mcp.weather.client.Application      : Started Application in 4.627 seconds (process running for 5.574)

>>> QUESTION: What tools are available?

>>> ASSISTANT: The available tools are:

1. **spring_ai_mcp_client_my_mcp_weather_server_toUpperCase**: This tool converts a given text input to upper case.

2. **spring_ai_mcp_client_my_mcp_weather_server_getAlerts**: This tool retrieves weather alerts for a specified US state using a two-letter state code (e.g., CA for California, NY for New York).

3. **ai_mcp_client_my_mcp_weather_server_getWeatherForecastByLocation**: This tool provides the weather forecast for a specific latitude and longitude.

These tools can be used for various weather-related queries and text formatting.
2025-06-15T19:38:21.742+08:00  WARN 20176 --- [mcp] [     parallel-6] i.m.c.transport.StdioClientTransport     : Process terminated with code 1
Disconnected from the target VM, address: '127.0.0.1:57459', transport: 'socket'

Process finished with exit code 0

```






